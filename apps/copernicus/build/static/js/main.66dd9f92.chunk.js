(this.webpackJsonpcopernicus=this.webpackJsonpcopernicus||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/play_button.8de15c15.svg"},,,,,,function(e,t,a){e.exports=a.p+"static/media/pause_button.7bf4f11c.svg"},,,function(e,t,a){e.exports=a.p+"static/media/info_button.34246b8f.svg"},function(e,t,a){e.exports=a.p+"static/media/Earth.17663dc4.wav"},function(e,t,a){e.exports=a.p+"static/media/Jupiter.6236af16.wav"},function(e,t,a){e.exports=a.p+"static/media/Mars.186d4556.wav"},function(e,t,a){e.exports=a.p+"static/media/Mercury.366fc173.wav"},function(e,t,a){e.exports=a.p+"static/media/Neptune.574f62cc.wav"},function(e,t,a){e.exports=a.p+"static/media/Pluto.e1c3dd2b.wav"},function(e,t,a){e.exports=a.p+"static/media/Saturn.ff475143.wav"},function(e,t,a){e.exports=a.p+"static/media/Uranus.d29359be.wav"},function(e,t,a){e.exports=a.p+"static/media/Venus.4e69ea88.mp3"},,function(e,t,a){e.exports=a(43)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),s=(a(32),a(5)),o=a(4),u=a(2),l=a.n(u),m=a(3),p=a(1),d=(a(34),a(35),function(){return r.a.createElement("div",{className:"solar-system"},r.a.createElement("div",{className:"sun"}),r.a.createElement("div",{className:"gravity-mercury"},r.a.createElement("div",{className:"mercury"})),r.a.createElement("div",{className:"gravity-venus"},r.a.createElement("div",{className:"venus"})),r.a.createElement("div",{className:"gravity-earth"},r.a.createElement("div",{className:"earth"})),r.a.createElement("div",{className:"gravity-mars"},r.a.createElement("div",{className:"mars"})),r.a.createElement("div",{className:"gravity-jupiter"},r.a.createElement("div",{className:"jupiter"})),r.a.createElement("div",{className:"gravity-saturn"},r.a.createElement("div",{className:"saturn"})),r.a.createElement("div",{className:"gravity-uranus"},r.a.createElement("div",{className:"uranus"})),r.a.createElement("div",{className:"gravity-neptune"},r.a.createElement("div",{className:"neptune"})),r.a.createElement("div",{className:"gravity-pluto"},r.a.createElement("div",{className:"pluto"})))}),f=a(26),v=a(9),h=a(10),y=a(12),b=a(11),E=(a(36),a(37),function(e){var t=e.playState,a=e.image,c=e.populatePlayButtonList,i=e.passRefToPlayer,s=Object(n.useState)(""),o=Object(p.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(null),v=Object(p.a)(f,2),h=v[0],y=v[1],b=Object(n.useRef)();Object(n.useEffect)((function(){(function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(b.current);case 2:null!==h&&(c(h),i(h));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[h]);return r.a.createElement("img",{src:a,alt:"play and pause button",className:"play-button ".concat(u),ref:b,onClick:function(){t(),d(""===u||"press-again"===u?"press":"press-again")}})}),O=a(16),g=a.n(O),j=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).defaultValue=0,n.componentDidMount=function(){n.progressTimer=setInterval((function(){return n.progressFollow()}),100)},n.progressFollow=function(){var e=n.props.pureTime/n.props.pureDuration*100;n.setState({progressBarValue:e})},n.changeLocation=function(e){var t=e.nativeEvent.offsetX/e.target.offsetWidth,a=n.props.pureDuration*t,r=100*t;n.setState({progressBarValue:Number(r)}),n.props.updateCurrentTime(a)},n.state={progressBarValue:"0"},n.progressBar=r.a.createRef(),n}return Object(h.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return r.a.createElement("div",{className:"progress-container",onClick:this.changeLocation},r.a.createElement("progress",{className:"audio-progress",type:"number",max:"100",value:this.state.progressBarValue||0,ref:this.progressBar}))}}]),a}(r.a.Component),N=function(e){var t=e.title,a=e.opacity;return r.a.createElement("p",{className:"audio-player-title ".concat(a)},t)},w=a(7),k=a.n(w),T=a(13),S=a.n(T),x=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(e){n.props.infoButtonOpacity&&"full-opacity"===n.state.infoBtnOpacity&&(window.innerWidth<501||window.innerWidth<900&&window.matchMedia("(orientation: landscape)").matches)&&n.setState({infoBtnOpacity:""})},n.playState=function(e){n.props.stopPlayingTracks(n.state.playButton),0===n.audio.current.currentTime?(n.setState({buttonImage:S.a}),n.setState({titleOpacity:"teal"}),n.audio.current.play()):n.state.buttonImage===S.a?(n.setState({buttonImage:k.a}),n.setState({titleOpacity:""}),n.audio.current.pause()):n.state.buttonImage===k.a&&(n.setState({buttonImage:S.a}),n.setState({titleOpacity:"teal"}),n.audio.current.play())},n.resetTrack=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({buttonImage:k.a}),n.setState({titleOpacity:""}),e.next=4,n.props.autoPlayTrackList(n.state.playButton);case 4:n.audio.current.load();case 5:case"end":return e.stop()}}),e)}))),n.setPlayButtonRefState=function(e){n.setState({playButton:e})},n.getTimeCalc=function(e){var t=n.audio.current,a=Math.floor(t.currentTime.toFixed(0)/60)+":"+(t.currentTime.toFixed(0)<10?"0".concat(t.currentTime.toFixed(0)):t.currentTime.toFixed(0)%60<10?"0".concat(t.currentTime.toFixed(0)%60):t.currentTime.toFixed(0)%60?t.currentTime.toFixed(0)%60:"00");n.setState({currentTime:a}),n.getDuration()},n.getDuration=function(e){var t=Math.floor(n.audio.current.duration.toFixed(0))-Math.floor(n.audio.current.currentTime.toFixed(0)),a=Math.floor(t/60)+":"+(t<10?"0".concat(t):t%60<10?"0".concat(t%60):t%60?t%60:"00");n.setState({timeRemaining:a}),n.pureTimeAndDuration()},n.pureTimeAndDuration=function(){n.setState({pureTime:n.audio.current.currentTime,pureDuration:n.audio.current.duration});var e=n.audio.current,t=e.played,a=e.currentTime.toFixed(0),r=e.dataset.title;n.props.sendDataToViewer(n.state.currentTime,n.state.timeRemaining,r,t,a)},n.updateCurrentTime=function(e){n.audio.current.currentTime=e},n.changeInfoBtnOpacity=function(){""===n.state.infoBtnOpacity?n.setState({infoBtnOpacity:"full-opacity"}):n.setState({infoBtnOpacity:""})},n.state={currentTime:"0:00",pureTime:0,pureDuration:0,buttonImage:k.a,infoBtnOpacity:"",titleOpacity:"",volume:1,timeRemaining:"0:00",playButton:null},n.audio=r.a.createRef(),n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"audio-player"},r.a.createElement("audio",{className:"audio-file ",src:this.props.audioFile,ref:this.audio,onTimeUpdate:this.getTimeCalc,onDurationChange:this.getDuration,onEnded:this.resetTrack,"data-title":this.props.title}),r.a.createElement(E,{playState:this.playState,image:this.state.buttonImage,populatePlayButtonList:this.props.populatePlayButtonList,passRefToPlayer:this.setPlayButtonRefState}),r.a.createElement(j,{pureTime:this.state.pureTime,pureDuration:this.state.pureDuration,onClick:this.changeLocation,updateCurrentTime:this.updateCurrentTime}),r.a.createElement(N,{title:this.props.title,opacity:this.state.titleOpacity}),r.a.createElement("img",{className:"info-button ".concat(this.state.infoBtnOpacity||this.props.infoButtonOpacity),src:g.a,alt:"info",onClick:this.props.displayPlanetInfo,onMouseUp:this.changeInfoBtnOpacity,"data-title":this.props.title}))}}]),a}(r.a.Component),D=(a(38),function(e){var t=e.displayPlanetInfo,a=e.musicData,c=e.sendDataToViewer,i=e.currentTime,s=e.currentTrack,o=e.timeRemaining,u=e.slideInOrOut,d=e.playlistSlideState,v=e.slideIconState,h=e.infoButtonOpacity,y=Object(n.useState)(""),b=Object(p.a)(y,2),E=b[0],O=b[1],g=Object(n.useState)([]),j=Object(p.a)(g,2),N=j[0],w=j[1],k=function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w((function(e){return[].concat(Object(f.a)(e),[t])}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){if("on"===E){var t=N.indexOf(e),a=N[t+1];t===N.length-1?N[0].click():a.click()}},S=function(e){var t=N.filter((function(e){return e.src.match("pause_button")}));t.length>0&&t[0].click()},D=a.map((function(e){return r.a.createElement(x,{title:e.title,key:e._id,audioFile:e.audioName,composer:e.composer,displayPlanetInfo:t,sendDataToViewer:c,autoPlayTrackList:T,populatePlayButtonList:k,infoButtonOpacity:h,stopPlayingTracks:S})}));return r.a.createElement("div",{className:"playlist-container ".concat(d)},r.a.createElement("div",{className:"playlist-interface"},r.a.createElement("div",{className:"player-display"},r.a.createElement("p",{className:"current-time"},i),r.a.createElement("p",{className:"title"},s),r.a.createElement("p",{className:"time-remaining"},o)),D,r.a.createElement("div",{className:"bottom-display"},r.a.createElement("p",null,"auto-play:"),r.a.createElement("div",{className:"autoplay-container ".concat(E),onClick:function(){O(""===E?"on":"")}}))),r.a.createElement("div",{className:"playlist-tab",onClick:u},r.a.createElement("div",{className:v})))}),B=(a(39),function(e){var t=e.artistDescription,a=e.character,n=e.composer,c=e.difficulty,i=(e.instruments,e.length),s=e.rhythm,o=e.title,u=e.year,l=e.visibilityState;return r.a.createElement("div",{className:"info-card ".concat(l)},r.a.createElement("h1",{className:"card-title"},o),r.a.createElement("p",{className:"description"},t),r.a.createElement("div",{className:"stats"},r.a.createElement("p",null,r.a.createElement("span",null,"Composer:")," ",n),r.a.createElement("p",null,r.a.createElement("span",null,"Year:")," ",u),r.a.createElement("p",null,r.a.createElement("span",null,"Length:")," ",i),r.a.createElement("p",null,r.a.createElement("span",null,"Instruments:")," Piano"),r.a.createElement("p",null,r.a.createElement("span",null,"Difficulty:")," ",c),r.a.createElement("p",null,r.a.createElement("span",null,"Character: ")," ",a),r.a.createElement("p",null,r.a.createElement("span",null,"Rhythm:")," ",s)))}),C=function(e){var t=e.exitPlanetInfo,a=e.musicData,n=e.planetState,c=e.slideOutState,i=a.map((function(e){var t=e.artistDescription,a=e.character,c=e.composer,i=e.difficulty,s=e.instruments,o=e.length,u=e.rhythm,l=e.title,m=e.year,p=e._id,d="planet-grow"===n[l.toLowerCase()]?"visible":"";return r.a.createElement(B,{key:"".concat(p).concat(d," "),artistDescription:t,character:a,composer:c,difficulty:i,instruments:s,length:o,rhythm:u,title:l,year:m,visibilityState:d})}));return r.a.createElement("div",{className:"info-card-list ".concat(c)},r.a.createElement("div",{className:"close-info-cards",onClick:t}),i)},I=(a(40),function(e){var t=e.musicData,a=e.currentTime,c=e.currentTrack,i=e.pureTime,u=Object(n.useState)(""),d=Object(p.a)(u,2),f=d[0],v=d[1],h=Object(n.useState)(""),y=Object(p.a)(h,2),b=y[0],E=y[1],O=Object(n.useReducer)((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{track:"current track",time:"current time",name:"",message:""}),g=Object(p.a)(O,2),j=g[0],N=g[1],w=t.map((function(e){return r.a.createElement("option",{className:"track-option",value:e.title,key:e._id},e.title)})),k=function(e){var t=e.target.name,a=e.target.value;N(Object(s.a)({},t,a))},T=function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("track"!==j.track){e.next=3;break}return e.next=3,N({track:c});case 3:if("time"!==j.time){e.next=6;break}return e.next=6,N({time:a});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(l.a.mark((function e(a){var n,r,s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.preventDefault();case 3:return e.next=5,T();case 5:return n=t.find((function(e){return e.title===c}))._id,r=JSON.stringify({track_id:n,name:j.name,timestamp:i,comment:j.message}),e.next=9,fetch("https://cors-anywhere.herokuapp.com/https://copernicus-api.herokuapp.com/tracks/".concat(c,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:r});case 9:return s=e.sent,e.next=12,s.json();case 12:o=e.sent,u={track:"track",time:"time",name:"",message:"".concat(o)},N(u),setTimeout((function(){return N({message:""})}),3e3),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"comment-container"},r.a.createElement("div",{className:"comment-icon ".concat(b),onClick:function(){"close-form-icon"!==b?(E("close-form-icon"),v("visible-form")):(E("switch-to-icon"),v(""))}}),r.a.createElement("form",{className:"track-comment-form ".concat(f),onSubmit:S},r.a.createElement("div",{className:"first-column"},r.a.createElement("select",{onChange:k,value:j.track,name:"track"},r.a.createElement("option",{className:"track-option",placeholder:"current track"},"current"),w),r.a.createElement("input",{onChange:k,className:"track-time",type:"text",placeholder:"time",value:j.time,name:"time"}),r.a.createElement("input",{onChange:k,className:"name",type:"text",placeholder:"name",value:j.name,name:"name"})),r.a.createElement("textarea",{type:"text",placeholder:"make a comment about one of the tracks here",value:j.message,onChange:k,name:"message"}),r.a.createElement("input",{type:"submit",className:"submit",value:"Submit"})))}),P=(a(41),function(e){var t=e.musicData,a=e.currentTrack,c=(e.currentTime,e.pureTime),i=Object(n.useState)([]),s=Object(p.a)(i,2),o=s[0],u=s[1],l=Object(n.useState)([]),m=Object(p.a)(l,2),d=m[0],f=m[1],v=t.map((function(e){return[e.title,e.comments]}));return Object(n.useEffect)((function(){var e=v.filter((function(e){return e[0]===a})),t=e.map((function(t){return e.length>0?t[1]:{name:"",comment:"",timestamp:1e6}}));u(t)}),[a]),Object(n.useEffect)((function(){if(void 0!==o[0]){var e=o[0].filter((function(e){var t=Number(c)-Number(e.timestamp);return e.timestamp<=c&&t<20})).map((function(e){return r.a.createElement("div",{key:e._id,className:"single-comment"},' "'.concat(e.comment,'"   -').concat(e.name))}));f(e)}}),[o,c]),r.a.createElement("div",{className:"comment-display"},d)}),L=(a(42),function(e){var t=e.planetState;return r.a.createElement("div",{className:"planet-collection"},r.a.createElement("div",{className:"mercury-info ".concat(t.mercury)}),r.a.createElement("div",{className:"venus-info ".concat(t.venus)}),r.a.createElement("div",{className:"earth-info ".concat(t.earth)}),r.a.createElement("div",{className:"mars-info ".concat(t.mars)}),r.a.createElement("div",{className:"jupiter-info  ".concat(t.jupiter," ")}),r.a.createElement("div",{className:"saturn-info ".concat(t.saturn)}),r.a.createElement("div",{className:"uranus-info ".concat(t.uranus)}),r.a.createElement("div",{className:"neptune-info ".concat(t.neptune)}),r.a.createElement("div",{className:"pluto-info ".concat(t.pluto)}))}),F=a(17),R=a.n(F),M=a(18),V=a.n(M),W=a(19),_=a.n(W),U=a(20),J=a.n(U),A=a(21),H=a.n(A),z=a(22),G=a.n(z),X=a(23),Y=a.n(X),q=a(24),K=a.n(q),Q=a(25),Z=a.n(Q),$=function(){var e=Object(n.useState)({mercury:"",venus:"",earth:"",mars:"",jupiter:"",saturn:"",uranus:"",neptune:"",pluto:""}),t=Object(p.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),u=Object(p.a)(i,2),f=u[0],v=u[1],h=[V.a,H.a,_.a,K.a,J.a,G.a,Y.a,Z.a,R.a],y=Object(n.useState)(""),b=Object(p.a)(y,2),E=b[0],O=b[1],g=Object(n.useState)(""),j=Object(p.a)(g,2),N=j[0],w=j[1],k=Object(n.useState)("-:--"),T=Object(p.a)(k,2),S=T[0],x=T[1],B=Object(n.useState)("-:--"),F=Object(p.a)(B,2),M=F[0],W=F[1],U=Object(n.useState)("-"),A=Object(p.a)(U,2),z=A[0],X=A[1],q=Object(n.useState)(0),Q=Object(p.a)(q,2),$=Q[0],ee=Q[1],te=Object(n.useState)(window.innerWidth<501||window.innerWidth<900&&window.matchMedia("(orientation: landscape)").matches?"slide-out-playlist":"slide-in-playlist"),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(window.innerWidth<501||window.innerWidth<900&&window.matchMedia("(orientation: landscape)").matches?"slide-in-icon":"slideout-icon"),ie=Object(p.a)(ce,2),se=ie[0],oe=ie[1],ue=Object(n.useState)("0"),le=Object(p.a)(ue,2),me=le[0],pe=le[1];Object(n.useEffect)((function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;console.log(e),document.documentElement.style.setProperty("--vh","".concat(e,"px"))}))})),Object(n.useEffect)((function(){(function(){var e=Object(m.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/https://copernicus-api.herokuapp.com/tracks",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return(a=e.sent).sort((function(e,t){return e.playListOrder-t.playListOrder})),a.forEach((function(e){return e.audioName=h[a.indexOf(e)]})),e.next=10,v(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"main-title ".concat(N)},"Copernicus Etudes"),r.a.createElement(d,null),r.a.createElement(L,{planetState:a}),r.a.createElement(D,{displayPlanetInfo:function(e){var t=e.target.dataset.title.toLowerCase();"planet-grow"!==a[t]?(c((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,"planet-grow"))})),O("slide-out"),w("left"),(window.innerWidth<501||window.innerWidth<900&&window.matchMedia("(orientation: landscape)").matches)&&(re("slide-out-playlist"),oe("slide-in-icon"))):(c((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,"planet-shrink"))})),O(""),w(""))},musicData:f,sendDataToViewer:function(e,t,a,n,r){0!==n.length&&(x(e),W(t),X(a),ee(r))},currentTime:S,timeRemaining:M,currentTrack:z,slideInOrOut:function(){""===ne||"slide-in-playlist"===ne?(re("slide-out-playlist"),w("")):(re("slide-in-playlist"),w("title-fade")),oe("slideout-icon"===se?"slide-in-icon":"slideout-icon")},playlistSlideState:ne,slideIconState:se,infoButtonOpacity:me}),r.a.createElement(C,{musicData:f,planetState:a,slideOutState:E,exitPlanetInfo:function(){var e=Object(o.a)({},a);for(var t in e)"planet-grow"===e[t]&&(e[t]="planet-shrink");c(e),O(""),w(""),pe(""===me?"0":"1")}}),r.a.createElement(I,{musicData:f,currentTrack:z,currentTime:S,pureTime:$}),r.a.createElement(P,{musicData:f,currentTime:S,currentTrack:z,pureTime:$}))};i.a.render(r.a.createElement($,null),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.66dd9f92.chunk.js.map